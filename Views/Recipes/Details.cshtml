@model CulinaryAdventures.Models.Recipe
@{ ViewData["Title"] = Model.Title; }

<div class="container my-5">
    <div class="row">
        <div class="col-md-6">
            <img src="@Model.ImageUrl" class="img-fluid rounded shadow" alt="@Model.Title">
        </div>
        <div class="col-md-6">
            <h1 class="mb-3">@Model.Title</h1>
            <p class="text-muted">@Model.Category ¬∑ ‚è± @Model.PrepTimeMin min ¬∑ üë• @Model.Servings servings</p>

            <h4>Ingredients</h4>
            <p class="white-space-pre-line">@Model.Ingredients</p>

            <h4>Method</h4>
            <p class="white-space-pre-line">@Model.Instructions</p>

            @if (User.Identity.IsAuthenticated && User.Identity.Name == Model.OwnerName)
            {
                <div class="mt-3">
                    <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-sm btn-primary">Edit</a>
                    <form asp-action="Delete" method="post" class="d-inline">
                        <input type="hidden" name="id" value="@Model.Id" />
                        <button class="btn btn-sm btn-danger"
                           onclick="return confirm('Delete this recipe?')">Delete</button>
                    </form>
                </div>
            }
            else if (User.Identity.IsAuthenticated)
            {
                <div class="alert alert-info mt-3">
                    Only the owner (<strong>@Model.OwnerName</strong>) can edit this recipe.
                </div>
            }

            <a asp-action="Index" asp-controller="Home" class="btn btn-outline-secondary mt-3">‚Üê Back to gallery</a>
        </div>
    </div>

    <hr class="my-5">

    <h3>Reviews & Ratings</h3>
    <partial name="_ReviewForm" model="new Review(){ RecipeId = Model.Id }" />
    <partial name="_ReviewList" model="Model.Reviews" />
</div>